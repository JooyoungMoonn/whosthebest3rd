<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="dc.human.whosthebest.myPage.dao.MyPageDAO">

    <!--마이페이지 메인 - 이름 , 소속팀 ,랭크 출력-->
    <resultMap id="myPageInfo" type="myPageInfoVO">
        <result property="uID"          column="u_id" />
        <result property="uName"        column="u_name" />
        <result property="tID"          column="t_id" />
        <result property="tName"        column="t_name"/>
        <result property="tRankScore"   column="rankscore" />
    </resultMap>

    <!-- 마이페이지메인 - 최근 경기결과  -->
    <resultMap id="recentGame" type="recentGameVO">
        <result property="gResDate"     column="g_resdate"  />
        <result property="myTeam"       column="myTeam" />
        <result property="awayTeam"     column="awayTeam" />
        <result property="sName"        column="s_name" />
        <result property="homeGoal"     column="home_goal" />
        <result property="awayGoal"     column="away_goal" />
    </resultMap>


    <!--마이페이지 메인 - 이름 , 소속팀 ,랭크 출력-->
    <select id="selectMyPageInfo" resultMap="myPageInfo">
        <![CDATA[
             select  users.u_name,
                     team.t_name,
                     team.rankscore
             from  team, squad , users
             where squad.t_id=team.t_id
                    and squad.u_id=users.u_id
                    and users.u_id='hong'
        ]]>
    </select>

    <!-- 마이페이지메인 - 최근 경기결과  -->
    <select id="selectRecentGame"  resultMap="recentGame">
        <![CDATA[
             SELECT
                    g.G_RESDATE,
                    t.t_name as myTeam,
                    tt.t_name as awayTeam,
                    s.s_name,
                    r.home_goal,
                    r.away_goal
             FROM G_RESULT r
                INNER JOIN GAME g
                ON g.G_ID = r.g_id
                INNER JOIN STADIUM s
                ON g.S_ID = s.S_ID
                INNER JOIN TEAM t
                ON t.T_ID = r.T_HOMEID
                INNER JOIN TEAM tt
                ON tt.T_ID = r.T_AWAYID
                INNER JOIN SQUAD sq
                on sq.t_id = r.t_homeid
             where sq.u_id = 'hong'
                   and rownum <=4
             order by g.g_resdate desc
        ]]>
    </select>



</mapper>