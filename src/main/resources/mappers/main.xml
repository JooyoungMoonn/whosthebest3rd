<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="dc.human.whosthebest.main.dao.MainDAO">

    <resultMap id="gameListResult" type="dc.human.whosthebest.vo.GameListVO">
        <result property="gTitle" column="G_TITLE"/>
        <result property="gCreatedDate" column="G_CREATEDATE"/>
    </resultMap>

    <resultMap id="teamInfoResult" type="dc.human.whosthebest.vo.TeamInfoVO">
        <id property="tID" column="T_ID" />
        <result property="tName" column="T_NAME" />
        <result property="tLogo" column="T_LOGO" />
        <result property="tRegion" column="T_REGION" />
        <result property="tPhone" column="T_PHONE" />
        <result property="tRankScore" column="RANKSCORE" />
        <result property="rankName" column="RANKNAME" />
        <result property="tMinAge" column="T_MINAGE" />
        <result property="tMaxAge" column="T_MAXAGE" />
        <result property="tMaxMember" column="T_MAXMEMBER" />
        <result property="tMember" column="T_MEMBER" />
        <result property="tInfo" column="T_INFO" />
        <result property="createdID" column="CREATED_ID" />
        <result property="createdDate" column="CREATED_DATE" />
        <result property="updatedID" column="UPDATED_ID" />
        <result property="updatedDate" column="UPDATED_DATE" />
    </resultMap>

    <!-- TeamMemberVO resultMap-->
    <resultMap id="teamMemberResult" type="dc.human.whosthebest.vo.TeamMemberVO">
        <id property="tID" column="T_ID" />
        <result property="uID" column="U_ID" />
        <result property="uStatus" column="U_STATUS" />
        <result property="createdID" column="CREATED_ID" />
        <result property="createdDate" column="CREATED_DATE" />
        <result property="updatedID" column="UPDATED_ID" />
        <result property="updatedDate" column="UPDATED_DATE" />
    </resultMap>

    <select id="mainGameList" resultType="String">
        SELECT G_TITLE FROM GAME ORDER BY G_CREATEDATE DESC
    </select>

    <select id="mainRanking" resultType="String">
        <![CDATA[
        SELECT
            T.T_NAME
        FROM
            TEAM T
        LEFT JOIN
            RANK R ON T.RANKSCORE BETWEEN R.MINSCORE AND R.MAXSCORE
        ORDER BY
        CASE
            WHEN T.RANKSCORE IS NULL THEN -1
            ELSE T.RANKSCORE
        END DESC,
        T.RANKSCORE DESC,
        T.CREATED_DATE ASC

    ]]>
    </select>


</mapper>